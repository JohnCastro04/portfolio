---
// Header.astro - Componente de header responsive con hamburguesa
---

<header>
  <div class="header">
    <input type="checkbox" id="toggle-nav" class="toggle-input">
    <label for="toggle-nav" class="hamburger" aria-label="Abrir menú">
      <span></span>
      <span></span>
      <span></span>
    </label>
    
    <nav>
      <ul>
        <li><a href="#inicio">Inicio</a></li>
        <li><a href="#sobre-mi">Sobre Mí</a></li>
        <li><a href="#experiencia">Experiencia</a></li>
        <li><a href="#proyectos">Proyectos</a></li>
        <li><a href="#habilidades">Habilidades</a></li>
      </ul>
    </nav>
  </div>
</header>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    // Scroll para header
    function handleScroll() {
      if (window.scrollY > 50) {
        document.body.classList.add("scrolled");
      } else {
        document.body.classList.remove("scrolled");
      }
    }
    window.addEventListener("scroll", handleScroll);

    // Cerrar menú en móvil
    const toggleInput = document.getElementById("toggle-nav");
    document.querySelectorAll(".header nav a").forEach(link => {
      link.addEventListener("click", () => {
        if (toggleInput) toggleInput.checked = false;
      });
    });

    const sections = document.querySelectorAll("section[id]");
    const navLinks = document.querySelectorAll(".header nav a");

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            navLinks.forEach((link) => link.classList.remove("active"));

            const id = entry.target.getAttribute("id");
            const activeLink = document.querySelector(`.header nav a[href="#${id}"]`);
            if (activeLink) activeLink.classList.add("active");
          }
        });
      },
      { threshold: 0.3 }
    );

    sections.forEach((section) => observer.observe(section));
  });
</script>

